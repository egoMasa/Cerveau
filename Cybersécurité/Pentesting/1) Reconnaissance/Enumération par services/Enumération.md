* Objectif : Enumérer toutes les informations disponibles qui pourrait nous servir par services, on liste toutes informations qu'un service peut nous fournir et qui accessible. On énumère chaque services ouverts sur un cible afin d'en tirer partie et trouver une entrée potentielle ou bien des informations cruciales ou utiles qui pourrait nous servir pour avancer dans le système
* Se poser la question : que fais le service de base et quelle informations et accès peut-il nous fournir.

# Méthodologie générale
1. Scanner avec nmap la version et utiliser scripts dessus
```
nmap -T4 -p[PORT] -sC -sV [IP]
nmap -T4 -p[PORT] --script=*[PROTOCOLE]* [IP]
```
2. Se connecter au service et lister toutes les informations disponibles
3. Utiliser des outils spécifiques pour le service souhaité : metasploit (auxiliary), enum4linux
4. Bien mettre sous forme de notes chaque trouvailles et informations trouvées
# 1) Services DNS 


# 2) Services web

# 4) Services de partage de fichiers
* Lister les partages disponibles
* Lister le contenu disponibles et accessibles
* Lister les utilisateurs et autres informations contenu dans le partage
## SMB, Samba


## NFS

# 5) Services de connexions

## SSH
1. Obtenir la bannière de connexion SSH (version)
```
nc -vn <IP> 22
```
2. Utiliser scripts nmap
```
nmap --script ssh-* -p 21 [ip]
nmap -p22 <ip> --script ssh2-enum-algos 
nmap -p22 <ip> --script ssh-hostkey --script-args ssh_hostkey=full
nmap -p22 <ip> --script ssh-auth-methods --script-args="ssh.user=root"
```
3. Enumérer les utilisateurs via metasploit
```
msf> use auxiliary/scanner/ssh/ssh_enumusers
```
4. Se connecter au service 
```
ssh [USER]@[IP]
ssh –i [KEY] [USER]@[IP]  # Connection avec cléf
```
4. Bruteforce
```
hydra [-L users.txt or -l user_name] [-P pass.txt or -p password] -f [-S port] ssh
nmap -p 22 –script ssh-brute –script-args userdb=[users.lst],passdb=[pass.lst] –script-args ssh-brute.timeout=4s [IP]
```
5. Chemin des cléfs 
```
$user/.ssh/id_rsa
$user/.ssh/authorized key
```
6. Cracker cléf privé
```
ssh2john id_rsa > id_rsa.hash
john --wordlist=/usr/share/wordlists/rockyou.txt id_rsa.hash
ssh [USER]@[IP] -i [CLEF] # Via le MP de john
```

## TELNET
1. Obtenir la bannière de connexion Telnet (version)
```
nc -vn <IP> 23
```
2. Utiliser scripts nmap
```
nmap -n -sV -Pn --script "*telnet* and safe" -p 23 <IP>
```
3. Utiliser les auxiliaires metasploit
```
msfconsole -q -x 'use auxiliary/scanner/telnet/telnet_version; set RHOSTS {IP}; set RPORT 23; run; exit' && msfconsole -q -x 'use auxiliary/scanner/telnet/brocade_enable_login; set RHOSTS {IP}; set RPORT 23; run; exit' && msfconsole -q -x 'use auxiliary/scanner/telnet/telnet_encrypt_overflow; set RHOSTS {IP}; set RPORT 23; run; exit' && msfconsole -q -x 'use auxiliary/scanner/telnet/telnet_ruggedcom; set RHOSTS {IP}; set RPORT 23; run; exit'
```
4. Se connecter au service 
```
telnet [USER]@[IP]
```
4. Bruteforce avec Hydra
```
hydra -l [USER] -P [WORDLIST] [IP] telnet
```


# 6) Services de messagerie

## SMTP
1. Obtenir la bannière de connexion
```
nc -vn [IP] 25
```
2. Utiliser scripts nmap
```
nmap -p25 --script smtp-commands [IP]
nmap -p25 --script smtp-open-relay [IP] -v
```

## IMAP

## POP3 
