# Guide Burp Suite

# I) Généralités
* Application qui permet d'effectuer des tests de pénétration sur des applications web et mobiles
* Permet d'intercepter, visualiser et modifier des requêtes
* Différentes versions de Burp Suite
	* ***Burp Suite Community*** (gratuit)
		* Version avec certaines limitation mais suffisamment pour en faire
	* ***Burp Suite Professional*** (400e/an)
		* Fonctionnalités en plus : Scan vulnérabilités automatisés, un fuzzing/bruteforce sans limite de débit, API intégré
	* ***Burp Suite Enterprise*** 
		* Destinée analyse automatisées et périodiques des applications web
* Notion de ***fuzzing***
	* Envoyer des requêtes aléatoires mal constitué volontairement pour évaluer la résilience et identifier certaines vulnérabilités
* Notion de ***payloads***
        * Wordlist utilisé pour modifier variables prédéfinis d'une requête
* Permet de modifier des requêtes pour faire du bruteforce ou de l'injection 
* Utilise un système de variables (add) dans les requêtes afin de pouvoir appeler certains paramètres dans les autres sections 
* Possibilité de télécharger des modules/extensions tiers via ***BApp Store***

# II) Outils disponibles de base
* ***Proxy*** : Intercepter et modifier requêtes lors d'une interaction avec un serveur web
* ***Repeater*** : Capture, modifie et renvoie plusieurs fois la même requête.
* ***Intruder*** : Spam de requête sur un point précis, utile pour bruteforce ou du fuzzing
* ***Decoder*** : Transforme/ décode données des informations capturés.
* ***Comparer*** : Permet de comparer 2 paquets de données entre eux
* ***Sequencer*** : Evalue la qualité de l'aléatoire d'un token (cookie de session) ou autre données génères aléatoirement

# III) Installation du Burp Suite
* Burp Suite est déjà installé sur Kali Linux
```
apt-get install burpsuite
```
* Sur d'autres systèmes, allez sur la page de Burp Suite 
https://portswigger.net/burp/releases/professional-community-2023-3-4?requestededition=community&requestedplatform=

# IV) Configuration de Burp Suite
* Options de configurations dans 2 endroits
	* ***Users Options*** (globaux)
		* ***Connections*** : Contrôler la manière dont Burp établit des connexions avec les cibles
			* Plateforme d'authentification
			* Proxy Serveurs
			* SOCKS Proxy
		* ***TLS*** : Activer et de désactiver diverses options TLS et télécharger des certificats clients au cas où une application web nous demanderait d'en utiliser un pour les connexions.
			* Java TLS Options
			* Client TLS Certificates
		* ***Display*** : Affichage
		* ***Misc*** : Divers
	* ***Project Options*** (du projet)
		* ***Connections*** : Contrôler la manière dont Burp établit des connexions avec les cibles
			* Plateforme d'authentification
			* Proxy Serveurs
			* SOCKS Proxy
			* Timeouts
			* Résolution DNS : correspondre des domaines à des IP directement
		* ***HTTP*** :  Gestion de si il suit les redirections et comment gérer les codes de réponse inhabituels.
			* Redirections
			* Streaming Responses
			* HTTP1,2
		* ***TLS*** 
			* Négociation TLS
			* Certificats TLS clients
			* Certificats TLS serveur
		* ***Sessions*** : Gestion des sessions
			* Cookie
		* ***Misc*** : Autres fonctionnalités diverses
* On peut overwrite les données définis dans user options (qui reste de façon permanente) avec les options de projets (qui se reset à la fermeture)

# V) Burp Proxy

## Présentation
* Utilité 
	* Permet de ***capturer*** les requêtes et réponses entre nous et la cible
	* Permet de ***manipuler*** et les renvoyer vers d'autres outils d'analyse 
	* Permet un ***contrôle*** total sur notre trafic 
	* Quand on envoie un requête elle passe par le proxy qui lui gère si il bloque, modifie et laisse passer les paquets
* Accessible via ***l'onglet Proxy***

## Configuration
* Pour utiliser le proxy et capturer le traffic il faut le défnir comme proxy sur le navigateur
	* Soit directement dans paramètres firefox
	* Soit via extension FoxyProxy
* Il faut ajouter un certificat entre le proxy et le navigateur sinon l'accès est refusé
	* Rentrer l'URL : http://burp/cert qui va nous télécharger le certificat
	* Ajouter le fichier certificat dans Privacy&Security/Certifcates/ViewCertificates/import
	* Bien cocher trust de partout
* Quand j'envoie une requête, je peux observer chaque paquets transmis, modifier les informations et les transmettre à d'autre outils
* CTRL+F pour forward le paquet 

# VI) Scoping et Targeting
* Notion de cadrage de la cible 
	* On ne veut pas que BURP capture tout notre traffic vers chaque site
	* On va défnir les cibles (IP/URL) qui doivent être capturer
* Disponible dans Target/Site map
	* On clique gauche le site cible et on ajoute au scope
* Dans Proxy/Options/Intercepted client requests
	* Coché URL : Permet d'ignorer ce qui se passe dans le layer application

# VII) Site Map et Issue Definitions
* Dans l'onglet Target
	* Site map 
		* Photographie complète des sections d'un site
		* Générer carte d'un site d'une cible en explorant ses pages
		* Utile pour cartographier les API
	* Scope 
		* Définition des barrières du scan
	* Issue Definitions
		* Liste des vulnérabilités avec descriptions et références