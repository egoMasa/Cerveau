# Etape 1 : Nmap
* Enumérer les ports SMB
```
kali@kali:~$ nmap -v -p 139,445 -oG smb.txt <ip>
```
* Enumérer les scripts Nmap pour SMB
```
kali@kali:~$ ls -1 /usr/share/nmap/scripts/smb*

kali@kali:~$ nmap -v -p 139, 445 --script=smb-os-discovery 10.11.1.227

kali@kali:~$ nmap -v -p 139,445 --script=smb-vuln-ms08-067 --script-args=unsafe=1 10.11.1.5
```
# Etape 2 : SMBClient

1. Se connecter à un partage SMB en tant qu'invité :
``smbclient //<adresse_IP>/<partage>``

2. Se connecter à un partage SMB avec un nom d'utilisateur spécifié :
``smbclient -U <nom_utilisateur> //<adresse_IP>/<partage>``

3. Se connecter à un partage SMB avec un nom d'utilisateur spécifié et un mot de passe :
``smbclient -U <nom_utilisateur>%<mot_de_passe> //<adresse_IP>/<partage>``

4. Se connecter à un partage SMB avec un nom d'utilisateur spécifié, un mot de passe et un domaine :
``smbclient -U <nom_utilisateur>%<mot_de_passe> -W <nom_domaine> //<adresse_IP>/<partage>``

5. Lister les fichiers et dossiers dans le partage SMB :
``smb: \> ls``

6. Naviguer vers un dossier spécifique dans le partage SMB :
``smb: \> cd <dossier>``

7. Télécharger un fichier depuis le partage SMB vers le répertoire local :
``smb: \> get <nom_fichier>``

8. Télécharger un dossier depuis le partage SMB vers le répertoire local :
``smb: \> mget <nom_dossier>``

9. Télécharger un fichier spécifique depuis le partage SMB vers un emplacement spécifié :
``smb: \> get <nom_fichier> <chemin_local>``

10. Télécharger un dossier spécifique depuis le partage SMB vers un emplacement spécifié :
``smb: \> mget <nom_dossier> <chemin_local>``

11. Envoyer un fichier local vers le partage SMB :
``smb: \> put <chemin_local>/<nom_fichier>``

12. Envoyer un dossier local vers le partage SMB :
``smb: \> mput <chemin_local>/<nom_dossier>``

13. Supprimer un fichier dans le partage SMB :
``smb: \> del <nom_fichier>``

14. Supprimer un dossier dans le partage SMB :
``smb: \> rmdir <nom_dossier>``

15. Quitter smbclient :
``smb: \> quit``

# Etape 3 : nbtscan (NetBIOS information)
0. Syntaxe générale 
```
kali@kali:~$ sudo nbtscan -r 10.11.1.0/24

-r option is used to specify the originating UDP port as 137, which is used to query the NetBIOS name service for valid NetBIOS names
```

1. Lancer une analyse du réseau local :
``nbtscan <adresse_IP/masque>``

2. Lancer une analyse du réseau local avec une plage d'adresses IP :
``nbtscan -r <adresse_IP_début>-<adresse_IP_fin>``

3. Lancer une analyse du réseau local en spécifiant l'interface réseau :
``nbtscan -i <interface>``

4. Lancer une analyse du réseau local en spécifiant un fichier contenant les adresses IP :
``nbtscan -f <fichier_IP>``

5. Lancer une analyse du réseau local en spécifiant un fichier contenant les adresses IP et en utilisant des threads personnalisés :
``nbtscan -f <fichier_IP> -T <nombre_threads>``

6. Lancer une analyse du réseau local en mode silencieux (affiche uniquement les adresses IP répondantes) :
``nbtscan -q <adresse_IP/masque>``

7. Lancer une analyse du réseau local en affichant les informations détaillées (hostname, groupe de travail, OS) :
``nbtscan -v <adresse_IP/masque>``

8. Lancer une analyse du réseau local en utilisant une liste de serveurs WINS spécifiés :
``nbtscan -w <serveur_WINS1>,<serveur_WINS2>``

9. Lancer une analyse du réseau local en utilisant une liste de serveurs WINS spécifiés et en spécifiant l'interface réseau :
``nbtscan -i <interface> -w <serveur_WINS1>,<serveur_WINS2>``

10. Lancer une analyse du réseau local en utilisant une liste de serveurs WINS spécifiés et en spécifiant un fichier contenant les adresses IP :
``nbtscan -f <fichier_IP> -w <serveur_WINS1>,<serveur_WINS2>``

11. Lancer une analyse du réseau local en utilisant une liste de serveurs WINS spécifiés, en spécifiant un fichier contenant les adresses IP et en utilisant des threads personnalisés :
``nbtscan -f <fichier_IP> -T <nombre_threads> -w <serveur_WINS1>,<serveur_WINS2>``

